<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Patterns of Enterprise Application Architecture - Web Presentation</title>
  <meta name="author" content="Thiago Pontes" />
  <meta name="description" content="Programming, Javascript, Ruby, Ruby on Rails, Scala, Python" />
  <meta property="fb:admins" content="thiagopnts"/>
  <link rel="openid.server" href="http://www.clickpass.com/openid_server" />
  <link rel="stylesheet" href="/blog/css/compiled/base.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="/blog/css/plugins/pygments.css" type="text/css" />
  <link media="only screen and (max-device-width: 480px)" href="/blog/css/iphone.css" type="text/css" rel="stylesheet" />
  <link media="only screen and (device-width: 768px)" href="/blog/css/ipad.css" type="text/css" rel="stylesheet" />
  <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz' rel='stylesheet' type='text/css'>
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="/blog/js/compiled/application.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      
    });
  </script>
</head>

<body>
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/pt_BR/all.js#xfbml=1&appId=254582621301698";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>
    
  <section class="sidebar">
    <a href="/">
      <img src="http://www.gravatar.com/avatar/dfdcc7fdb4b631ae9c30acd5ac6c2cbe.png" height="75" width="75" class="avatar" />
    </a>

    <section class="name">
      <a href="/">
        <span id="thiago">Thiago</span>
        <span id="pontes">Pontes</span>
      </a>
    </section>

    <section class="alt-text">&nbsp;</section>

    <section class="meta">
      <a href="https://github.com/thiagopnts" id="github">
        <img src="/blog/images/github.png" alt="github" title="thiagopnts on GitHub" height="16" width="16" />
      </a>
      <a href="https://twitter.com/thiagopnts" id="twitter">
        <img src="/blog/images/twitter.png" alt="twitter" title="@thiagopnts on Twitter" height="16" width="16" />
      </a>
      <a href="http://feeds.feedburner.com/thiagopontes/lXRA" id="rss">
        <img src="/blog/images/rss.png" alt="rss" title="Subscribe to this blog's RSS feed" height="16" width="16" />
      </a>
      
    </section>

  </section>

  <section class="content">
  <h1>
    <a href="/posts/enterprise-patterns-part4">Patterns of Enterprise Application Architecture - Web Presentation</a>
  </h1>

  <section class="byline">
    April 18, 2012
  </section>

  <p><img src="http://ecx.images-amazon.com/images/I/511D6FdsbXL._AA160_.jpg" width="250" height="250" /></p>

<h2>Chapter 4 &ndash; Web Presentation</h2>

<p>This chapter talk about the presentation layer, which is in the currently days mostly web browser based user interfaces. This bring a lot of advantages: no client software to install, a common UI approach, easy universal compatibility with browsers(sic), and it&rsquo;s more easy and beautiful to develop then desktop UIs(IMO).
Here we will discuss three main view patterns: Template View, Transform View and Two Step View.</p>

<h2>Template View Pattern</h2>

<p>This is the most common approach to build a web page with dynamic content, the basic idea is to embed markers into a static HTML page when it&rsquo;s written and when it is served as a response for a request it is markers are replaced for computed content, such as a database query. This way the page can show different contents based on previous computation. As a lot of tools use this pattern, the important here isn&rsquo;t how to build something using this pattern but to understand how it works and use it. To embed the markers just pick a tool, see the docs and start coding. Currently there are a lot of template engines out there, such as mustache, jinja2, etc. The most popular forms are with PHP, JSP and ASP like server pages. This approach go further then than the basic form, they allow you to embed arbitraty programming logic, called scriptlets, into the page. Obviously it isn&rsquo;t recommended, since your page becomes incomprehensible for non-programmers and it is a problem when you have to work with designers, other problem is that you starts to mix the application layers and everything will become a mess. A good advice the author gives to avoid scriptlets in the server page is using a Helper Object which containts all the real programming logic. One thing to watch in Template Views is exceptions, if one exception occurs while processing the server page you will have a half processed page that provides decidedly odd output, you can look at how your web server handles exceptions and depending you can catch all with the helper object.</p>

<h2>Transform View Pattern</h2>

<p>The main idea here is that the data is requested and is provided by a data source layer through a domain model, but the data isn&rsquo;t formatted to make a a proper web page, using the Transform View means thinking of this as a transformation where you have the model&rsquo;s data as input and the HTML as the output. A Tranform View is organized around separete transforms for each kind of input element. The tranform is controlled by something like a simple loop that looks at each input element, finds the appropriate transform for that element and then calls the transform on it. This remember me JSON parsers, you input an object and it parses it to JSON. The author uses an XML example to illustrate this example, which was the most common approach when the book was written. The choice between a Transform View and a Template View depends on the team, although the Template View be more used, the Transform View pattern is more portable since you can use the JSON/XML generate as output in any other platform such as Java or .NET.</p>

<h2>Two Step View Pattern</h2>

<p>When making global changes to the pages appearance becomes hard you can start to think to use the Two Step View Pattern. This pattern deals with this problem by splitting the transformation into two stages, the first on transforms the model data into a logical presentation without any specific formatting, the second converts that logical presentation with the actual formatting needed, this way you can make global changes just adjusting the second stage. With a single stage view approach(such sd the other patterns discussed here) you build a one view module per web page, with a two stage view you have one stage for the model and other for the entire application. Your pay-off is that any changes to the appearance of the site in the second stage is much easier to make, since one second-stage change affects the site as a whole. The pattern isn&rsquo;t good for design-heavy sites, where each page is supposed to look different because it&rsquo;s hard to find what can be used in the second stage. Other disadvantage is that there isn&rsquo;t some many tools to help non-programmers use this approach like the Template View has, so it become hard to use in a team with designers.</p>

<h2>Conclusion</h2>

<p>I believe most of us use a Template View framework in our day to day work and is already used to it, but its good to know there is other ways to deal with view rendering and stuff, and how this works internally, because how knows when you gonna need use something like this?</p>


  <section class="meta">
    <h3>Discussion, links, and tweets</h3>
    <section class="copy">
      <a href="https://twitter.com/thiagopnts">
        <img src="http://www.gravatar.com/avatar/dfdcc7fdb4b631ae9c30acd5ac6c2cbe.png" height="80" width="80" />
      </a>

      <p>
          I'm a Software Engineer Intern which among one line of code and a cup of coffee likes to listen to music and disagree with people. </br>
          Feel free to send me a <a href="mailto:thiagopnts@gmail.com">email</a>. </br>
          I'm <a href="https://twitter.com/thiagopnts">@thiagopnts</a> on Twitter. </br>
          I'm <a href="http://git.io/thi">thiagopnts</a> on Github. </br>
          You can find me on <a href="http://facebook.com/thiagopnts">Facebook</a> and <a href="http://www.linkedin.com/profile/view?id=82767657">Linkedin</a>.
      </p>
      <a href="http://twitter.com/share" class="twitter-share-button" data-count="true" data-via="thiagopnts">Tweet</a>
      <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
      <a href="http://twitter.com/thiagopnts" class="twitter-follow-button" data-show-count="false">Follow @thiagopnts</a>
      <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
      <div class="fb-like" data-href="http://thiagopontes.net/posts/enterprise-patterns-part4" data-send="false" data-width="450" data-show-faces="true"></div>    
      <div class="fb-comments" data-href="http://thiagopontes.net/posts/enterprise-patterns-part4" data-num-posts="5" data-width="500"></div>    
    </section>
  </section>
</section>


    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-18026195-3']);
      _gaq.push(['_setDomainName', 'thiagopontes.net']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</body>

</html>
