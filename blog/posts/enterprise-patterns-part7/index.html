<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Patterns of Enterprise Application Architecture - Distribution Strategies</title>
  <meta name="author" content="Thiago Pontes" />
  <meta name="description" content="Programming, Javascript, Ruby, Ruby on Rails, Scala, Python" />
  <meta property="fb:admins" content="thiagopnts"/>
  <link rel="openid.server" href="http://www.clickpass.com/openid_server" />
  <link rel="stylesheet" href="/blog/css/compiled/base.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="/blog/css/plugins/pygments.css" type="text/css" />
  <link media="only screen and (max-device-width: 480px)" href="/blog/css/iphone.css" type="text/css" rel="stylesheet" />
  <link media="only screen and (device-width: 768px)" href="/blog/css/ipad.css" type="text/css" rel="stylesheet" />
  <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz' rel='stylesheet' type='text/css'>
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="/blog/js/compiled/application.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      
    });
  </script>
</head>

<body>
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/pt_BR/all.js#xfbml=1&appId=254582621301698";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>
    
  <section class="sidebar">
    <a href="/">
      <img src="http://www.gravatar.com/avatar/dfdcc7fdb4b631ae9c30acd5ac6c2cbe.png" height="75" width="75" class="avatar" />
    </a>

    <section class="name">
      <a href="/">
        <span id="thiago">Thiago</span>
        <span id="pontes">Pontes</span>
      </a>
    </section>

    <section class="alt-text">&nbsp;</section>

    <section class="meta">
      <a href="https://github.com/thiagopnts" id="github">
        <img src="/blog/images/github.png" alt="github" title="thiagopnts on GitHub" height="16" width="16" />
      </a>
      <a href="https://twitter.com/thiagopnts" id="twitter">
        <img src="/blog/images/twitter.png" alt="twitter" title="@thiagopnts on Twitter" height="16" width="16" />
      </a>
      <a href="http://feeds.feedburner.com/thiagopontes/lXRA" id="rss">
        <img src="/blog/images/rss.png" alt="rss" title="Subscribe to this blog's RSS feed" height="16" width="16" />
      </a>
      
    </section>

  </section>

  <section class="content">
  <h1>
    <a href="/posts/enterprise-patterns-part7">Patterns of Enterprise Application Architecture - Distribution Strategies</a>
  </h1>

  <section class="byline">
    May 11, 2012
  </section>

  <p><img src="http://ecx.images-amazon.com/images/I/511D6FdsbXL._AA160_.jpg" width="250" height="250" /></p>

<h2>Chapter 7 &ndash; Distribution Strategies</h2>

<p>This chapter is about object distribution, it&rsquo;s like when you need to run different services in different boxes, this services can be objects, or a set of objects running in different machines, this improves performance because if one box component gets too busy we can add extra boxes for it, using a load balancer. In this chapter we learn why this architecture sucks, and what to do when we need a distribuited architecture.</p>

<h2>Remote and Local Interfaces</h2>

<p>The primary reason that the distribuition in boxes doesn&rsquo;t work has to do with a fundamental fact of computers. A procedure call within a process is very fast. A procedure call between two separate processes is orders of magnitude slower. Make that a process running on another machine and you can add another order of magnitude or two, depending on the network. This means that the interface for a remote object should be different from a local one. For instance, in a local object, we create an interface for it to access each class' fields individually, through gets and sets, but in a remote object we will want to set all the field with just one request, and not individually as the local object interface approach, the remote approach focus on minimizing the calls, instead flexibility and extendibility. As we said before that putting each service in a box it&rsquo;s not good, this is because that you will have another bottle neck when sending messages to the remote objects. A good solution is use clustering, which means run all the services locally and run other instances on multiple nodes.</p>

<h2>Working with the Distribution Boundary</h2>

<p>As you design your system you try to keep everything locally in a single process, but if you end up needing to distribute something you can isolate this objects and create an interface to use it, this interface will act like a facade for the distributed objects, this is a pattern called Remote Facade. Using a Remote Facade helps minimize the difficulties that the remote interface introduces. This way only the objects that really need a remote service will get the different interface, and this facade can mime a local interface for the other developers. Another known pattern is the Data Transfer Object, it&rsquo;s used when you not only need to invoke remote methods, but when you need to transfer objects too. This is normally used when you have different processes running, because this pattern acts like the channel between the process to share the object.</p>

<h2>Interfaces for Distribution</h2>

<p>When this book was written, the interfaces for distributed components have been based on remote procedure calls, but today we see a lot of interfaces based on XML/JSON over HTTP, it&rsquo;s the famous REST interfaces. This is a handy approach for several reasons, it easily allows a  lot of data to be sent, in structured form, in a single roundtrip. Since remote calls need to be minimized, this is a good thing. Another good thing is that all common programming languages has XML/JSON parses so different plataforms can interact between, through it.</p>

<h2>Conclusion</h2>

<p>Always keep everything together when possible, but when you have to distribute it through multiple processes, you can keep the system clean creating an remote interface for the services that need make/receive remote calls and other interface for the local object to keep everything simple using regular OO. As you saw you can do it easily nowadays using REST.</p>


  <section class="meta">
    <h3>Discussion, links, and tweets</h3>
    <section class="copy">
      <a href="https://twitter.com/thiagopnts">
        <img src="http://www.gravatar.com/avatar/dfdcc7fdb4b631ae9c30acd5ac6c2cbe.png" height="80" width="80" />
      </a>

      <p>
          I'm a Software Engineer Intern which among one line of code and a cup of coffee likes to listen to music and disagree with people. </br>
          Feel free to send me a <a href="mailto:thiagopnts@gmail.com">email</a>. </br>
          I'm <a href="https://twitter.com/thiagopnts">@thiagopnts</a> on Twitter. </br>
          I'm <a href="http://git.io/thi">thiagopnts</a> on Github. </br>
          You can find me on <a href="http://facebook.com/thiagopnts">Facebook</a> and <a href="http://www.linkedin.com/profile/view?id=82767657">Linkedin</a>.
      </p>
      <a href="http://twitter.com/share" class="twitter-share-button" data-count="true" data-via="thiagopnts">Tweet</a>
      <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
      <a href="http://twitter.com/thiagopnts" class="twitter-follow-button" data-show-count="false">Follow @thiagopnts</a>
      <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
      <div class="fb-like" data-href="http://thiagopontes.net/posts/enterprise-patterns-part7" data-send="false" data-width="450" data-show-faces="true"></div>    
      <div class="fb-comments" data-href="http://thiagopontes.net/posts/enterprise-patterns-part7" data-num-posts="5" data-width="500"></div>    
    </section>
  </section>
</section>


    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-18026195-3']);
      _gaq.push(['_setDomainName', 'thiagopontes.net']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</body>

</html>
